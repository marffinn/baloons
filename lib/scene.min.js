let camera,controls,scene,outscene,renderer,group_main,object;!1===WEBGL.isWebGLAvailable()&&document.body.appendChild(WEBGL.getWebGLErrorMessage());let rotationSpeed=0,current_model=0,manager=new THREE.LoadingManager,loader=new THREE.JSONLoader(manager),raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,raycastArray=[],color=new THREE.Color(16777215),objectChosen=null,chosenArray={},cookieModel,size=260,divisions=8,gridHelper=new THREE.GridHelper(size,divisions),picturesUploaded=[],INTERSECTED;function init(){const color=16777215,near=20,far=4500;(scene=new THREE.Scene).fog=new THREE.Fog(color,20,far),scene.name="BALOONS_STAGE",window.scene=scene,(camera=new THREE.PerspectiveCamera(65,window.innerWidth/window.innerHeight,1,5e3)).position.x=150,camera.position.y=200,camera.position.z=150,camera.lookAt(scene.position),(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).physicallyCorrectLights=!0,renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.gammaFactor=2.2,renderer.gammaOutPut=!0,renderer.setClearColor(0,0),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),(controls=new THREE.OrbitControls(camera,renderer.domElement)).dampingFactor=.1,controls.enableDamping=!0,controls.minDistance=70,controls.maxDistance=1500,controls.addEventListener("change",render),manager.onLoad=function(){linkInterpreter()};let loader=new THREE.JSONLoader(manager);(group_main=new THREE.Group).name="Models",scene.add(group_main),group_help=new THREE.Group,group_help.name="Helper",scene.add(group_help),gridHelper.position.y=0,gridHelper.name="Grid Helper",group_help.add(gridHelper),lights(),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("resize",onWindowResize,!1),$("#container").append(renderer.domElement)}function render(){renderer.render(scene,camera)}function animate(){group_main.rotation.y+=rotationSpeed,group_help.rotation.y+=rotationSpeed,requestAnimationFrame(animate),controls.update(),render()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseDown(event){event.preventDefault(),$(".skolory a p").removeClass("mark"),mouse.x=event.clientX/renderer.domElement.width*2-1,mouse.y=-event.clientY/renderer.domElement.height*2+1,raycaster.setFromCamera(mouse,camera);let intersects=raycaster.intersectObjects(raycastArray);intersects.length>0&&(objectChosen=intersects[0].object.name,cR="#"+intersects[0].object.material.color.getHexString().toUpperCase(),$('[hex*="'+cR+'"] p').addClass("mark"))}function onDocumentMouseMove(event){event.preventDefault(),mouse.x=event.clientX/renderer.domElement.width*2-1,mouse.y=-event.clientY/renderer.domElement.height*2+1,raycaster.setFromCamera(mouse,camera);let intersects=raycaster.intersectObjects(raycastArray);intersects.length>0?($("html,body").css("cursor","pointer"),intersects[0].object!=INTERSECTED&&(INTERSECTED&&INTERSECTED.material.color.setHex(INTERSECTED.currentHex),(INTERSECTED=intersects[0].object).currentHex=INTERSECTED.material.color.getHex(),INTERSECTED.material.color.setHex(15787660))):($("html,body").css("cursor","default"),INTERSECTED&&INTERSECTED.material.color.setHex(INTERSECTED.currentHex),INTERSECTED=null)}init(),animate();